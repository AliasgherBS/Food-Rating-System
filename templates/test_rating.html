<!DOCTYPE html>
<html>
<head>
    <title>Rating Test</title>
    <style>
        .emoji-btn {
            background: #f0f0f0;
            border: 2px solid #ccc;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.8rem;
            cursor: pointer;
            margin: 5px;
        }
        .emoji-btn.selected {
            background: #4ade80;
            border-color: #22c55e;
        }
        .menu-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Rating Test</h1>
    
    <div class="menu-item" data-item-id="test1" data-item-name="Test Item">
        <h3>Test Food Item</h3>
        <div class="rating-emoji">
            <button class="emoji-btn" data-rating="1" onclick="setRating(this, 1)">ğŸ˜</button>
            <button class="emoji-btn" data-rating="2" onclick="setRating(this, 2)">ğŸ˜</button>
            <button class="emoji-btn" data-rating="3" onclick="setRating(this, 3)">ğŸ™‚</button>
            <button class="emoji-btn" data-rating="4" onclick="setRating(this, 4)">ğŸ˜Š</button>
            <button class="emoji-btn" data-rating="5" onclick="setRating(this, 5)">ğŸ˜</button>
        </div>
        <div class="rating-text">
            <span class="rating-label">Tap to rate</span>
        </div>
    </div>

    <script>
        let ratings = {};

        function setRating(button, rating) {
            console.log('setRating called with rating:', rating);
            const menuItem = button.closest('.menu-item');
            const itemId = menuItem.dataset.itemId;
            const itemName = menuItem.dataset.itemName;
            
            // Update ratings object
            ratings[itemId] = {
                item_id: itemId,
                item_name: itemName,
                score: rating
            };
            
            // Update UI
            const emojiButtons = menuItem.querySelectorAll('.emoji-btn');
            emojiButtons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            
            const ratingTexts = {1: 'Bad', 2: 'Okay', 3: 'Good', 4: 'Great', 5: 'Amazing'};
            menuItem.querySelector('.rating-label').textContent = ratingTexts[rating];
            
            console.log('Current ratings:', ratings);
        }
    </script>
</body>
</html> 